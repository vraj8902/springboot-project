<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Trains</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen py-10 px-6">
<div class="max-w-7xl mx-auto">
    <h1 class="text-4xl font-extrabold mb-8 text-center text-indigo-700">All Trains</h1>

    <div class="overflow-x-auto rounded shadow-lg">
        <table class="min-w-full bg-white border border-gray-200">
            <thead class="bg-indigo-600 text-white text-sm">
                <tr>
                    <th class="px-4 py-3 text-left">Train No</th>
                    <th class="px-4 py-3 text-left">Name</th>
                    <th class="px-4 py-3 text-left">Route</th>
                    <th class="px-4 py-3 text-left">Fare</th>
                    <th class="px-4 py-3 text-left">Coaches</th>
                    <th class="px-4 py-3 text-left">Total Seats</th>
                    <th class="px-4 py-3 text-left">Available</th>
                    <th class="px-4 py-3 text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="train : ${trains}" class="hover:bg-gray-50 border-t text-sm">
                    <td class="px-4 py-3 font-semibold text-gray-800" th:text="${train.trainNo}">12345</td>
                    <td class="px-4 py-3" th:text="${train.trainName}">Express</td>
                    <td class="px-4 py-3" th:text="${train.source + ' → ' + train.destination}">Delhi → Mumbai</td>
                    <td class="px-4 py-3 text-green-600" th:text="'₹ ' + ${train.fare}">₹ 200</td>
                    <td class="px-4 py-3" th:text="${train.numberOfCoaches}">10</td>
                    <td class="px-4 py-3" th:text="${train.numberOfCoaches * 60}">600</td>
                    <td class="px-4 py-3" th:text="${train.availableSeats}">570</td>
                    <td class="px-4 py-3 text-center space-x-2">
                        <!-- USER BOOKING BUTTON -->
                        <a th:if="${#authorization.expression('hasRole(''USER'')')}" 
                           th:href="@{'/book/' + ${train.trainNo}}"
                           class="inline-block bg-green-500 hover:bg-green-600 text-white text-xs px-3 py-1 rounded">
                            Book
                        </a>

                        <!-- ADMIN EDIT BUTTON -->
                        <a th:if="${#authorization.expression('hasRole(''ADMIN'')')}" 
                           th:href="@{'/admin/train/edit/' + ${train.trainNo}}"
                           class="inline-block bg-yellow-500 hover:bg-yellow-600 text-white text-xs px-3 py-1 rounded">
                            Edit
                        </a>

                        <!-- ADMIN DELETE BUTTON -->
                        <a th:if="${#authorization.expression('hasRole(''ADMIN'')')}" 
                           th:href="@{'/admin/train/delete/' + ${train.trainNo}}"
                           onclick="return confirm('Are you sure you want to delete this train?')"
                           class="inline-block bg-red-500 hover:bg-red-600 text-white text-xs px-3 py-1 rounded">
                            Delete
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
